webpackJsonp([7],{ev66:function(t,e){},qFVi:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={name:"activeCode",data:function(){return{dialogVisible:!1,ActiveCode:[],rules:{name:{required:!0,message:"请填写名称",trigger:"blur"},content:{required:!0,message:"请填写网址",trigger:"blur"}},dataForm:{id:"",name:"",content:""}}},methods:{FORMER_PAGE:function(){this.$router.go(-1)},QUERY_CODE:function(){var t=this;this.axios.post("/code/query").then(function(e){t.$indicator.close(),1===e.state&&(t.ActiveCode=e.data||[])}).catch(function(e){t.$indicator.close(),console.log(e)})},ADD_MODIFY:function(t){t+1?(this.dataForm.id=this.ActiveCode[t].id,this.dataForm.name=this.ActiveCode[t].name,this.dataForm.content=this.ActiveCode[t].content,this.dialogVisible=!0):(this.dataForm.id="",this.dataForm.name="",this.dataForm.content="",this.dialogVisible=!0)},DELETE_CODE:function(t){var e=this,i=this.ActiveCode[t].id;this.$messagebox.confirm("确定删除？").then(function(t){"confirm"===t&&(e.$indicator.open(),e.axios.post("/code/delete",{id:i}).then(function(t){1===t.state&&(e.QUERY_CODE(),setTimeout(function(){e.$toast(t.msg)},500))}).catch(function(t){console.log(t)}))}).catch(function(t){"cancel"===t&&e.$indicator.close()})},dataFormSubmit:function(){var t=this;this.$refs.form.validate(function(e){e&&(t.dataForm.id?t.axios.post("/code/update",t.dataForm).then(function(e){1===e.state&&(t.QUERY_CODE(),t.dialogVisible=!1)}):t.axios.post("/code/insert",t.dataForm).then(function(e){1===e.state?(t.QUERY_CODE(),t.dialogVisible=!1,setTimeout(function(){},1e3)):setTimeout(function(){t.dialogVisible=!1},1e3)}))})}},created:function(){var t=this;this.$indicator.open(),this.$nextTick(function(){t.QUERY_CODE()})},mounted:function(){}},a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-view page-active-code"},[i("z-header",{attrs:{title:"活码管理"}},[i("span",{staticClass:"iconfont icon-jiantouarrowhead7",attrs:{slot:"user"},on:{click:function(e){return t.FORMER_PAGE()}},slot:"user"}),t._v(" "),i("span",{staticClass:"iconfont icon-tianjia",attrs:{slot:"scan"},on:{click:function(e){return t.ADD_MODIFY()}},slot:"scan"})]),t._v(" "),i("scroll",{ref:"scroll",staticClass:"scroll scroll-top"},[i("div",{staticClass:"index_wrapper"},[t.ActiveCode.length?t._l(t.ActiveCode,function(e,o){return i("div",{key:o,staticClass:"code_container"},[i("div",{staticClass:"qrcode_block",attrs:{id:"qrcode"}},[i("img",{attrs:{src:e.base64,alt:""}})]),t._v(" "),i("div",{staticClass:"code_info"},[i("p",[t._v("活码ID:"+t._s(e.id))]),t._v(" "),i("p",[t._v("网址: "+t._s(e.content))]),t._v(" "),i("p",[t._v("名称："+t._s(e.name))]),t._v(" "),i("div",{staticClass:"button_wrapper"},[i("button",{staticStyle:{color:"#409eff"},on:{click:function(e){return t.ADD_MODIFY(o)}}},[t._v("修改")]),t._v(" "),i("button",{staticStyle:{color:"red"},on:{click:function(e){return t.DELETE_CODE(o)}}},[t._v("删除")])])])])}):i("div",{staticClass:"nodata"},[t._v("暂无数据")])],2)]),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible,title:"活码管理",width:"80%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",{ref:"form",attrs:{model:t.dataForm,"label-width":"0.6rem",rules:t.rules}},[i("el-form-item",{attrs:{label:"名称",prop:"name"}},[i("el-input",{model:{value:t.dataForm.name,callback:function(e){t.$set(t.dataForm,"name",e)},expression:"dataForm.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"地址",prop:"content"}},[i("el-input",{model:{value:t.dataForm.content,callback:function(e){t.$set(t.dataForm,"content",e)},expression:"dataForm.content"}})],1),t._v(" "),i("el-form-item",{staticStyle:{"text-align":"right"}},[i("el-button",{attrs:{type:"primary"},on:{click:t.dataFormSubmit}},[t._v("提交")])],1)],1)],1)],1)},staticRenderFns:[]};var n=i("VU/8")(o,a,!1,function(t){i("ev66")},"data-v-76d09f8e",null);e.default=n.exports}});
//# sourceMappingURL=7.9551034cfde2747d8b60.js.map